{% extends 'main/main.html' %}

{% load static %}

{% block title %}
    <title>Сайт актуальной погоды</title>
{% endblock title %}

{% block content %}

<div id="headerwrap">
    <div class="container">
        <div class="row centered">
            <div class="col-lg-8 col-lg-offset-2">
                <h1>Погода на планете</h1>
                <h2>Интересно?</h2>
                <h3 class="subtitle">Введите город что бы узнать текущую погоду:</h2>
                    <div>
                        {% if errors %}
                        <ul>
                            {% for error in errors %}
                                <li style="color: red;">{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}

                       
                            <input class="city-form" id = 'My_str'name='city' type="text" required placeholder="Город:" value= {{form.city}}>
                            <input type="submit"  id = 'butt'class="btn btn-success" value="Отправить">
                        
                    </div>
            </div>
            <style type="text/css">
                #content_2{
                    color: #FF0000;
                }
            </style>
            <div id = "content_2"><h1>Lala</h1></div>
             <script> 
                        var CITY
                            $(document).ready(function(){
                                $('#butt').click(function(){
                                   
                                  CITY  = document.getElementById("My_str").value;
                                  
                                    setInterval(show('/weather_info/',$('#content_2')), 5000);
                                    });
                                });
                            
                            function show(url,block)  
                            {   

                                
                                $.ajax({
                                    type: 'POST',
                                    url: url,  
                                    cache: false, 
                                    data: {
                                    'city': CITY,
                                    'csrfmiddlewaretoken': '{{ csrf_token }}',
                                            },

                                    success: function(html){  
                                        block.html(html);  
                                    }  
                                });  
                            }  
      

                        </script> 



            <div class="col-lg-2 col-lg-offset8">
                <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                      <ol class="carousel-indicators">
                        <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                        <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                        <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                      </ol>  
                    <div class="carousel-inner">
                        <div class="item active">
                            <img src="static/bootstrap/img/sun.png" alt="">
                        </div>
                        <div class="item">
                            <img src="static/bootstrap/img/umbr.png" alt="">
                        </div>
                        <div class="item">
                            <img src="static/bootstrap/img/cloud.png" alt="">
                        </div>
                    </div>
                </div>      
            </div>
        </div>
    </div>
</div>

{% endblock content %}











